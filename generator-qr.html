<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Kod√≥w QR - Sklep</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #ddd;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            background: #f5f5f5;
            border: none;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .tab:hover {
            background: #e8e8e8;
        }

        .tab.active:hover {
            background: white;
        }

        .content {
            padding: 30px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        .generate-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
            margin-top: 10px;
        }

        .generate-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        .qr-result {
            margin-top: 30px;
            text-align: center;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
            display: none;
        }

        .qr-result.show {
            display: block;
        }

        #qrcode, #qrcode-money {
            display: inline-block;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin: 20px 0;
        }

        .download-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s;
        }

        .download-btn:hover {
            background: #1976D2;
        }

        .json-preview {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            word-wrap: break-word;
        }

        .quick-products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .quick-btn {
            background: #E3F2FD;
            color: #1976D2;
            border: 2px solid #1976D2;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .quick-btn:hover {
            background: #1976D2;
            color: white;
        }

        .info-box {
            background: #FFF9C4;
            border-left: 4px solid #FBC02D;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box strong {
            color: #F57C00;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî≤ Generator Kod√≥w QR</h1>
            <p>Generuj kody dla skanera zakup√≥w</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('product')">üì¶ Produkty</button>
            <button class="tab" onclick="switchTab('money')">üíµ P≈Çatno≈õci</button>
        </div>

        <div class="content">
            <!-- Tab: Produkty -->
            <div id="product-tab" class="tab-content active">
                <div class="form-group">
                    <label for="productName">Nazwa produktu:</label>
                    <input type="text" id="productName" placeholder="np. Mleko, Chleb, Par√≥wki">
                </div>

                <div class="form-group">
                    <label for="productPrice">Cena (z≈Ç):</label>
                    <input type="number" id="productPrice" step="1" placeholder="np. 10 - tylko pe≈Çne liczby (bez groszy)">
                </div>

                <button class="generate-btn" onclick="generateProductQR()">
                    üî≤ GENERUJ KOD QR
                </button>

                <div class="qr-result" id="qr-result-product">
                    <h3>Tw√≥j kod QR:</h3>
                    <div id="qrcode"></div>
                    <button class="download-btn" onclick="downloadQR('qrcode')">üì• Pobierz kod</button>
                    <button class="download-btn" onclick="printQR()">üñ®Ô∏è Drukuj</button>
                </div>

                <h3 style="margin-top: 30px; color: #667eea;">‚ö° Szybkie generowanie:</h3>
                <div class="quick-products">
                    <button class="quick-btn" onclick="quickProduct('Mleko', 5)">Mleko 5z≈Ç</button>
                    <button class="quick-btn" onclick="quickProduct('Chleb', 3)">Chleb 3z≈Ç</button>
                    <button class="quick-btn" onclick="quickProduct('Mas≈Ço', 7)">Mas≈Ço 7z≈Ç</button>
                    <button class="quick-btn" onclick="quickProduct('Par√≥wki', 10)">Par√≥wki 10z≈Ç</button>
                    <button class="quick-btn" onclick="quickProduct('Ser ≈º√≥≈Çty', 13)">Ser 13z≈Ç</button>
                    <button class="quick-btn" onclick="quickProduct('Jogurt', 3)">Jogurt 3z≈Ç</button>
                </div>

                <div style="margin-top: 30px; text-align: center;">
                    <a href="index.html" style="display: inline-block; background: #667eea; color: white; padding: 12px 30px; border-radius: 25px; text-decoration: none; font-weight: 500; margin: 10px;">
                        ‚Üê Wr√≥ƒá do skanera
                    </a>
                </div>

                <div style="margin-top: 15px; text-align: center;">
                    <button onclick="downloadTemplate('produkty')" style="background: #4CAF50; color: white; border: none; padding: 12px 30px; border-radius: 25px; cursor: pointer; font-weight: 500; font-size: 14px;">
                        üìÑ Pobierz szablon z produktami
                    </button>
                </div>
            </div>

            <!-- Tab: P≈Çatno≈õci -->
            <div id="money-tab" class="tab-content">
                <div class="form-group">
                    <label for="moneyAmount">Kwota (z≈Ç):</label>
                    <input type="number" id="moneyAmount" step="1" placeholder="np. 50 - tylko pe≈Çne liczby (bez groszy)">
                </div>

                <button class="generate-btn" onclick="generateMoneyQR()">
                    üî≤ GENERUJ KOD P≈ÅATNO≈öCI
                </button>

                <div class="qr-result" id="qr-result-money">
                    <h3>Tw√≥j kod QR:</h3>
                    <div id="qrcode-money"></div>
                    <button class="download-btn" onclick="downloadQR('qrcode-money')">üì• Pobierz kod</button>
                    <button class="download-btn" onclick="printQR()">üñ®Ô∏è Drukuj</button>
                </div>

                <h3 style="margin-top: 30px; color: #667eea;">‚ö° Popularne banknoty:</h3>
                <div class="quick-products">
                    <button class="quick-btn" onclick="quickMoney(10)">10 z≈Ç</button>
                    <button class="quick-btn" onclick="quickMoney(20)">20 z≈Ç</button>
                    <button class="quick-btn" onclick="quickMoney(50)">50 z≈Ç</button>
                    <button class="quick-btn" onclick="quickMoney(100)">100 z≈Ç</button>
                    <button class="quick-btn" onclick="quickMoney(200)">200 z≈Ç</button>
                    <button class="quick-btn" onclick="quickMoney(500)">500 z≈Ç</button>
                </div>

                <div style="margin-top: 30px; text-align: center;">
                    <a href="index.html" style="display: inline-block; background: #667eea; color: white; padding: 12px 30px; border-radius: 25px; text-decoration: none; font-weight: 500; margin: 10px;">
                        ‚Üê Wr√≥ƒá do skanera
                    </a>
                </div>

                <div style="margin-top: 15px; text-align: center;">
                    <button onclick="downloadTemplate('banknoty')" style="background: #4CAF50; color: white; border: none; padding: 12px 30px; border-radius: 25px; cursor: pointer; font-weight: 500; font-size: 14px;">
                        üìÑ Pobierz szablon z banknotami
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Zmiana zak≈Çadek
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            if (tab === 'product') {
                document.querySelectorAll('.tab')[0].classList.add('active');
                document.getElementById('product-tab').classList.add('active');
            } else {
                document.querySelectorAll('.tab')[1].classList.add('active');
                document.getElementById('money-tab').classList.add('active');
            }
        }

        // Generowanie QR dla produkt√≥w
        function generateProductQR() {
            const name = document.getElementById('productName').value;
            const price = parseFloat(document.getElementById('productPrice').value);

            if (!name || !price) {
                alert('Wype≈Çnij nazwƒô i cenƒô produktu!');
                return;
            }
            
            // Sprawd≈∫ czy cena to pe≈Çna liczba
            if (!Number.isInteger(price)) {
                alert("Cena musi byƒá pe≈ÇnƒÖ liczbƒÖ (bez groszy). Przyk≈Çad: 10, nie 10.50");
                return;
            }

            const data = JSON.stringify({nazwa: name, cena: price});
            
            try {
                document.getElementById('qrcode').innerHTML = '';
                
                // Pr√≥buj r√≥≈ºne rozmiary a≈º siƒô uda
                let success = false;
                const sizes = [
                    { typeNumber: 0, errorCorrectionLevel: 'L' },  // Auto-detect z najni≈ºszƒÖ korektƒÖ
                    { typeNumber: 0, errorCorrectionLevel: 'M' },  // Auto-detect ze ≈õredniƒÖ korektƒÖ
                    { typeNumber: 10, errorCorrectionLevel: 'L' }, // Du≈ºy rozmiar z niskƒÖ korektƒÖ
                ];
                
                for (let config of sizes) {
                    try {
                        new QRCode(document.getElementById('qrcode'), {
                            text: data,
                            width: 256,
                            height: 256,
                            colorDark: "#000000",
                            colorLight: "#ffffff",
                            correctLevel: QRCode.CorrectLevel[config.errorCorrectionLevel]
                        });
                        success = true;
                        break;
                    } catch (e) {
                        document.getElementById('qrcode').innerHTML = '';
                        continue;
                    }
                }
                
                if (!success) {
                    throw new Error('Nie mo≈ºna wygenerowaƒá kodu QR - dane sƒÖ zbyt d≈Çugie');
                }
                
                document.getElementById('qr-result-product').classList.add('show');
            } catch (error) {
                console.error('B≈ÇƒÖd generowania QR:', error);
                alert('Nie mo≈ºna wygenerowaƒá kodu QR. Nazwa produktu jest zbyt d≈Çuga.\n\nSpr√≥buj skr√≥ciƒá nazwƒô.');
            }
        }

        // Generowanie QR dla p≈Çatno≈õci
        function generateMoneyQR() {
            const amount = parseFloat(document.getElementById('moneyAmount').value);

            if (!amount) {
                alert('Wype≈Çnij kwotƒô!');
                return;
            }
            
            // Sprawd≈∫ czy kwota to pe≈Çna liczba
            if (!Number.isInteger(amount)) {
                alert("Kwota musi byƒá pe≈ÇnƒÖ liczbƒÖ (bez groszy). Przyk≈Çad: 50, nie 50.50");
                return;
            }

            const data = JSON.stringify({money: amount});
            
            try {
                document.getElementById('qrcode-money').innerHTML = '';
                new QRCode(document.getElementById('qrcode-money'), {
                    text: data,
                    width: 256,
                    height: 256,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.L
                });
                document.getElementById('qr-result-money').classList.add('show');
            } catch (error) {
                console.error('B≈ÇƒÖd generowania QR:', error);
                alert('WystƒÖpi≈Ç b≈ÇƒÖd podczas generowania kodu QR.');
            }
        }

        // Szybkie generowanie produktu
        function quickProduct(name, price) {
            document.getElementById('productName').value = name;
            document.getElementById('productPrice').value = Math.round(price);
            generateProductQR();
        }

        // Szybkie generowanie p≈Çatno≈õci
        function quickMoney(amount) {
            document.getElementById('moneyAmount').value = amount;
            generateMoneyQR();
        }

        // Pobieranie szablon√≥w PDF
        function downloadTemplate(type) {
            const filename = type === 'produkty' ? 'szablon_produkty.pdf' : 'szablon_banknoty.pdf';
            
            // Utw√≥rz link do pobrania
            const link = document.createElement('a');
            link.href = filename;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Pobieranie QR
        function downloadQR(elementId) {
            const canvas = document.querySelector(`#${elementId} canvas`);
            if (!canvas) {
                alert('Najpierw wygeneruj kod QR!');
                return;
            }

            const url = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = `qr-code-${Date.now()}.png`;
            link.href = url;
            link.click();
        }

        // Pobieranie banknotu (pe≈Çny obraz z QR + grafikƒÖ)
        function downloadBanknote() {
            const canvas = document.querySelector('#qrcode-money canvas');
            if (!canvas) {
                alert('Najpierw wygeneruj kod p≈Çatno≈õci!');
                return;
            }

            const amount = document.getElementById('moneyAmount').value;
            const banknoteCanvas = createBanknoteCanvas(canvas, amount);
            
            const url = banknoteCanvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = `banknot-${amount}zl.png`;
            link.href = url;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Drukowanie
        function printQR() {
            const productTab = document.getElementById('product-tab');
            const isProductActive = productTab.classList.contains('active');
            
            const qrElement = isProductActive 
                ? document.getElementById('qrcode')
                : document.getElementById('qrcode-money');
            
            const canvas = qrElement.querySelector('canvas');
            
            if (!canvas) {
                alert('Najpierw wygeneruj kod QR!');
                return;
            }

            let finalCanvas;
            if (isProductActive) {
                const productName = document.getElementById('productName').value || 'Produkt';
                const productPrice = document.getElementById('productPrice').value || '0';
                finalCanvas = createProductCanvas(canvas, productName, productPrice);
            } else {
                // Dla p≈Çatno≈õci te≈º u≈ºywamy prostego uk≈Çadu (QR + podpis)
                const amount = document.getElementById('moneyAmount').value || '0';
                finalCanvas = createProductCanvas(canvas, 'P≈Çatno≈õƒá', amount);
            }
            
            // Zawsze drukuj - bez wzglƒôdu na urzƒÖdzenie
            printCanvasImage(finalCanvas);
        }

        function downloadCanvasImage(canvas, isProduct) {
            const url = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            
            if (isProduct) {
                const name = document.getElementById('productName').value || 'produkt';
                link.download = `${name}.png`;
            } else {
                const amount = document.getElementById('moneyAmount').value;
                link.download = `platnosc-${amount}zl.png`;
            }
            
            link.href = url;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert('Obraz zosta≈Ç pobrany!\n\nOtw√≥rz galeriƒô i wydrukuj z opcji udostƒôpniania.');
        }

        function printCanvasImage(canvas) {
            const imgData = canvas.toDataURL('image/png');
            
            const printWindow = window.open('', '_blank', 'width=400,height=500');
            if (!printWindow) {
                alert('Zablokowano okno. Zezw√≥l na wyskakujƒÖce okna w ustawieniach przeglƒÖdarki.');
                return;
            }
            
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Drukuj</title>
                    <style>
                        * { margin: 0; padding: 0; }
                        body { 
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            min-height: 100vh;
                        }
                        img { 
                            max-width: 100%; 
                            height: auto;
                            display: block;
                        }
                        @media print {
                            body { margin: 0; padding: 0; }
                            img { max-width: 100%; page-break-inside: avoid; }
                        }
                    </style>
                </head>
                <body>
                    <img src="${imgData}" alt="QR Code" onload="setTimeout(function(){window.print();}, 100);" />
                </body>
                </html>
            `);
            printWindow.document.close();
        }

        // Generuje canvas z produktem (QR + tytu≈Ç)
        function createProductCanvas(qrCanvas, name, price) {
            const c = document.createElement('canvas');
            c.width = 300;
            c.height = 360;
            const ctx = c.getContext('2d');

            // bia≈Çe t≈Ço
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, 300, 360);

            // tytu≈Ç
            ctx.fillStyle = '#333';
            ctx.font = 'bold 22px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${name} - ${price} z≈Ç`, 150, 40);

            // QR (zmniejszony o 40%: 200 * 0.6 = 120)
            ctx.drawImage(qrCanvas, 90, 70, 120, 120);

            return c;
        }

        // Generuje canvas z banknotem (ramka + QR + kwota)
        function createBanknoteCanvas(qrCanvas, amount) {
            const c = document.createElement('canvas');
            c.width = 800;
            c.height = 400;
            const ctx = c.getContext('2d');

            // bia≈Çe t≈Ço
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, 800, 400);

            // gradient
            const gradient = ctx.createLinearGradient(0, 0, 800, 400);
            gradient.addColorStop(0, '#f5f5f5');
            gradient.addColorStop(1, '#e0e0e0');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 800, 400);

            // linie uko≈õne
            ctx.strokeStyle = 'rgba(255,255,255,0.3)';
            ctx.lineWidth = 2;
            for (let i = 0; i < 60; i++) {
                ctx.beginPath();
                ctx.moveTo(i * 30 - 400, 0);
                ctx.lineTo(i * 30, 400);
                ctx.stroke();
            }

            // ramka g≈Ç√≥wna
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 6;
            ctx.strokeRect(10, 10, 780, 380);

            // bia≈Çe t≈Ço dla QR
            ctx.fillStyle = 'white';
            ctx.fillRect(50, 100, 240, 240);
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 2;
            ctx.strokeRect(50, 100, 240, 240);

            // QR
            ctx.drawImage(qrCanvas, 60, 110, 220, 220);

            // BANKNOT
            ctx.fillStyle = '#333';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('BANKNOT', 550, 150);

            // kwota
            ctx.font = 'bold 144px Arial';
            ctx.fillStyle = '#1a1a1a';
            ctx.fillText(amount, 550, 280);

            // z≈Ç
            ctx.font = 'bold 56px Arial';
            ctx.fillStyle = '#555';
            ctx.fillText('z≈Ç', 550, 350);

            return c;
        }
        function getSimpleQRHTML(imgData, title) {
            return `<!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>${title}</title>
                    <style>
                        body {
                            margin: 0;
                            padding: 20px;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            font-family: Arial, sans-serif;
                            min-height: 100vh;
                        }
                        h2 {
                            margin-bottom: 20px;
                            text-align: center;
                            font-size: 18px;
                        }
                        img {
                            width: 128px;
                            height: 128px;
                        }
                        .print-info {
                            margin-top: 30px;
                            padding: 15px;
                            background: #e3f2fd;
                            border-radius: 8px;
                            text-align: center;
                        }
                        @media print {
                            body {
                                padding: 0;
                            }
                            .print-info {
                                display: none;
                            }
                        }
                    </style>
                </head>
                <body>
                    <h2>${title}</h2>
                    <img src="${imgData}" alt="QR Code" />
                    <div class="print-info">
                        üì± ANDROID: Pobierz obraz d≈Çugim klikniƒôciem na obrazku, potem wydrukuj z galerii
                    </div>
                </body>
                </html>`;
        }

        function getBanknoteHTML(imgData, amount) {
            return `<!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Banknot ${amount} z≈Ç</title>
                    <style>
                        * {
                            margin: 0;
                            padding: 0;
                            box-sizing: border-box;
                        }
                        body {
                            margin: 0;
                            padding: 20px;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            font-family: Arial, sans-serif;
                            min-height: 100vh;
                        }
                        .banknote {
                            width: 400px;
                            max-width: 100%;
                            height: 200px;
                            border: 3px solid #333;
                            border-radius: 10px;
                            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
                            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                            display: flex;
                            align-items: center;
                            padding: 20px;
                            position: relative;
                            overflow: hidden;
                        }
                        .banknote::before {
                            content: '';
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background: repeating-linear-gradient(
                                45deg,
                                transparent,
                                transparent 10px,
                                rgba(255,255,255,0.1) 10px,
                                rgba(255,255,255,0.1) 20px
                            );
                            pointer-events: none;
                        }
                        .qr-section {
                            flex-shrink: 0;
                            background: white;
                            padding: 10px;
                            border-radius: 8px;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                            z-index: 1;
                        }
                        .qr-section img {
                            display: block;
                            width: 120px;
                            height: 120px;
                        }
                        .value-section {
                            flex: 1;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            padding-left: 30px;
                            position: relative;
                            z-index: 1;
                        }
                        .banknote-label {
                            font-size: 24px;
                            font-weight: bold;
                            color: #333;
                            margin-bottom: 10px;
                            text-transform: uppercase;
                            letter-spacing: 2px;
                        }
                        .banknote-amount {
                            font-size: 72px;
                            font-weight: bold;
                            color: #1a1a1a;
                            line-height: 1;
                            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
                        }
                        .banknote-currency {
                            font-size: 28px;
                            font-weight: bold;
                            color: #555;
                            margin-top: 5px;
                        }
                        .print-info {
                            margin-top: 30px;
                            padding: 15px;
                            background: #e3f2fd;
                            border-radius: 8px;
                            text-align: center;
                            max-width: 400px;
                        }
                        @media print {
                            body {
                                padding: 0;
                            }
                            .banknote {
                                box-shadow: none;
                            }
                            .print-info {
                                display: none;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="banknote">
                        <div class="qr-section">
                            <img src="${imgData}" alt="QR Code" />
                        </div>
                        <div class="value-section">
                            <div class="banknote-label">BANKNOT</div>
                            <div class="banknote-amount">${amount}</div>
                            <div class="banknote-currency">z≈Ç</div>
                        </div>
                    </div>
                    <div class="print-info">
                        üì± ANDROID: Pobierz obraz d≈Çugim klikniƒôciem, potem wydrukuj z galerii
                    </div>
                </body>
                </html>`;
        }

        function openInNewTabMobile(htmlContent) {
            // Dla urzƒÖdze≈Ñ mobilnych - otw√≥rz w nowej karcie
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            window.open(url, '_blank');
        }

        function printSimpleQR(imgData, title) {
            const printContent = `
                <div style="text-align: center; padding: 20px;">
                    <h2 style="margin-bottom: 20px; font-size: 18px;">${title}</h2>
                    <img src="${imgData}" style="width: 128px; height: 128px;" />
                </div>
            `;
            
            createPrintWindow(printContent);
        }

        function printBanknote(imgData, amount) {
            const printContent = `
                <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px;">
                    <div style="
                        width: 400px;
                        height: 200px;
                        border: 3px solid #333;
                        border-radius: 10px;
                        background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
                        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                        display: flex;
                        align-items: center;
                        padding: 20px;
                        position: relative;
                        overflow: hidden;
                    ">
                        <div style="
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background: repeating-linear-gradient(
                                45deg,
                                transparent,
                                transparent 10px,
                                rgba(255,255,255,0.1) 10px,
                                rgba(255,255,255,0.1) 20px
                            );
                            pointer-events: none;
                        "></div>
                        <div style="
                            flex-shrink: 0;
                            background: white;
                            padding: 10px;
                            border-radius: 8px;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                            z-index: 1;
                        ">
                            <img src="${imgData}" style="display: block; width: 120px; height: 120px;" />
                        </div>
                        <div style="
                            flex: 1;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            padding-left: 30px;
                            position: relative;
                            z-index: 1;
                        ">
                            <div style="
                                font-size: 24px;
                                font-weight: bold;
                                color: #333;
                                margin-bottom: 10px;
                                text-transform: uppercase;
                                letter-spacing: 2px;
                            ">BANKNOT</div>
                            <div style="
                                font-size: 72px;
                                font-weight: bold;
                                color: #1a1a1a;
                                line-height: 1;
                                text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
                            ">${amount}</div>
                            <div style="
                                font-size: 28px;
                                font-weight: bold;
                                color: #555;
                                margin-top: 5px;
                            ">z≈Ç</div>
                        </div>
                    </div>
                </div>
            `;
            
            createPrintWindow(printContent);
        }

        function createPrintWindow(content) {
            // Utw√≥rz iframe ukryty w dokumencie
            const iframe = document.createElement('iframe');
            iframe.style.position = 'fixed';
            iframe.style.right = '0';
            iframe.style.bottom = '0';
            iframe.style.width = '0';
            iframe.style.height = '0';
            iframe.style.border = 'none';
            document.body.appendChild(iframe);
            
            const doc = iframe.contentWindow.document;
            doc.open();
            doc.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Drukuj</title>
                    <style>
                        * {
                            margin: 0;
                            padding: 0;
                            box-sizing: border-box;
                        }
                        body {
                            font-family: Arial, sans-serif;
                        }
                        @media print {
                            body {
                                padding: 0;
                            }
                            @page {
                                margin: 0.5cm;
                            }
                        }
                    </style>
                </head>
                <body>
                    ${content}
                </body>
                </html>
            `);
            doc.close();
            
            // Poczekaj na za≈Çadowanie, potem drukuj
            iframe.onload = function() {
                setTimeout(() => {
                    iframe.contentWindow.focus();
                    iframe.contentWindow.print();
                    
                    // Usu≈Ñ iframe po wydrukowaniu
                    setTimeout(() => {
                        document.body.removeChild(iframe);
                    }, 1000);
                }, 250);
            };
        }
    </script>
</body>
</html>
